# === Print Control Macros ===
[gcode_macro RESUME]
description: "Resume: restore hotend to stored target, then continue"
rename_existing: RESUME_BASE
gcode:
    {% set prev = printer["gcode_macro PAUSE"].prev_hotend|float %}
    {% set actual = printer.extruder.temperature|float %}

    {% if prev > 0 %}
    RESPOND MSG=" RESUME: restoring hotend to { '%.0f' % prev }C"
        M104 S{prev}
        {% if actual < prev - 1.0 %}
            M109 S{prev}       ; wait only if we need to HEAT
        {% endif %}
    {% else %}
    RESPOND MSG=" RESUME: no stored temp, continuing"
    {% endif %}

    ; Clear stored value (optional)
    SET_GCODE_VARIABLE MACRO=PAUSE VARIABLE=prev_hotend VALUE={0}

    RESPOND MSG=" Resuming print"
    RESUME_BASE